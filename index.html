<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>For You üíñ</title>

<style>
body{
  margin:0;
  height:100vh;
  background:linear-gradient(135deg,#ff9a9e,#fad0c4);
  font-family:'Segoe UI',sans-serif;
  display:flex;
  justify-content:center;
  align-items:center;
  text-align:center;
  overflow:hidden;
}

.container{width:100%;position:relative;z-index:2;}

button{
  padding:12px 30px;
  font-size:18px;
  border:none;
  border-radius:25px;
  cursor:pointer;
}

#yes{background:#ff4081;color:white;}
#no{
  background:#555;
  color:white;
  position:absolute;
}

.hidden{display:none;}

img,video{
  max-width:80%;
  border-radius:15px;
  box-shadow:0 10px 30px rgba(0,0,0,0.3);
}

#typing{font-size:22px;line-height:1.6;color:#4a0033;}
#loading{font-size:26px;color:#4a0033;}

/* ‚ù§Ô∏è FLOATING HEARTS */
.heart{
  position:absolute;
  bottom:-20px;
  font-size:20px;
  animation:float 8s linear infinite;
  opacity:0.7;
  z-index:1;
}
@keyframes float{
  0%{transform:translateY(0);opacity:0;}
  10%{opacity:1;}
  100%{transform:translateY(-110vh);opacity:0;}
}
</style>
</head>

<body>

<div class="container">

  <!-- STEP 0 -->
  <div id="step0">
    <h2>Will you be my Valentine? üíï</h2>
    <button id="yes">YES</button>
    <button id="no">NO</button>
  </div>

  <!-- TEXT -->
  <div id="step1" class="hidden">
    <div id="typing"></div>
  </div>

  <!-- VIDEO -->
  <div id="videoBox" class="hidden">
    <video id="vid" src="video.mp4"></video>
  </div>

  <!-- PHOTOS -->
  <div id="photoBox" class="hidden">
    <img id="photo">
  </div>

  <!-- LOADING -->
  <div id="loadingBox" class="hidden">
    <div id="loading">Loading...</div>
  </div>

</div>

<audio id="bgm" src="bgm.mp3" loop></audio>
<audio id="final" src="final.mp3"></audio>

<script>
let photos=[
  "photo1.jpg","photo2.jpg","photo3.jpg",
  "photo4.jpg","photo5.jpg","photo6.jpg","photo7.jpg"
];
let p=0;

const yes=document.getElementById("yes");
const no=document.getElementById("no");
const bgm=document.getElementById("bgm");
const final=document.getElementById("final");

yes.onclick=()=>{
  document.getElementById("step0").classList.add("hidden");

  // ‚úÖ FIXED: bgm force play
  bgm.volume=0.6;
  bgm.play().catch(()=>{});

  showLine("HAPPY ANNIVERSARY RA ‚ô•Ô∏è",playVideo);
};

no.onmouseover=()=>{
  let x=Math.random()*(window.innerWidth-120);
  let y=Math.random()*(window.innerHeight-60);
  no.style.left=x+"px";
  no.style.top=y+"px";
};

function showLine(text,done){
  document.getElementById("step1").classList.remove("hidden");
  let el=document.getElementById("typing");
  el.innerHTML="";
  let i=0;
  let t=setInterval(()=>{
    el.innerHTML+=text[i++];
    if(i>=text.length){
      clearInterval(t);
      setTimeout(done,2000);
    }
  },45);
}

function playVideo(){
  document.getElementById("step1").classList.add("hidden");
  let v=document.getElementById("vid");
  document.getElementById("videoBox").classList.remove("hidden");
  v.play();
  v.onended=()=>{
    document.getElementById("videoBox").classList.add("hidden");
    longLines();
  };
}

function longLines(){
  let lines=[
    "156 week's back same day I met this idiotüòöü§≠...",
"Our journey is unbelievable becoz destiny plan's our journeyüíåü´∂üèª ...",
"In this 36 months we understand each other'süëäüèªüíü understand me lots but this pandhi...",
"1095 day's have been completed but every second intimates aa pandhiii is Waiting for meüê∑üòÇ...",
"Happy 3rd year anniversary‚ôæÔ∏è‚ù§Ô∏è...",
"May be I'm not perfect for you but you always perfect for me pandu‚ú®ü©µ",
"This year 2026 we may not together to celebrate but trust me I'll be with you till our last anniversary in our lifeüíïüß¨...",
"Thank you for coming into my life unexpectedlyüíüü•π...",
"I already promised you I'll be your nothingü´≥üèªüíû",
"May be I'm unlucky in everything but you succeed me in loveü´∂üèªüíï",
"I never want to loose you in any situationü´≥üèªüíå..."
  ];
  typeLines(lines,showPhotos);
}

function typeLines(lines,done){
  document.getElementById("step1").classList.remove("hidden");
  let el=document.getElementById("typing");
  el.innerHTML="";
  let i=0,j=0;
  let int=setInterval(()=>{
    el.innerHTML+=lines[i][j++];
    if(j>=lines[i].length){
      el.innerHTML+="<br><br>";
      i++;j=0;
      if(i>=lines.length){
        clearInterval(int);
        setTimeout(done,2000);
      }
    }
  },40);
}

function showPhotos(){
  document.getElementById("step1").classList.add("hidden");
  document.getElementById("photoBox").classList.remove("hidden");
  let img=document.getElementById("photo");
  img.src=photos[p++];
  let interval=setInterval(()=>{
    if(p>=photos.length){
      clearInterval(interval);
      document.getElementById("photoBox").classList.add("hidden");
      finalLine();
    }else{
      img.src=photos[p++];
    }
  },2000);
}

function finalLine(){
  showLine("One last thing... ‚ù§Ô∏è",showLoading);
}

function showLoading(){
  document.getElementById("step1").classList.add("hidden");
  document.getElementById("loadingBox").classList.remove("hidden");
  setTimeout(()=>{
    document.getElementById("loadingBox").classList.add("hidden");
    lastScene();
  },3000);
}

function lastScene(){
  let img=document.getElementById("photo");
  img.src="last.jpg";
  document.getElementById("photoBox").classList.remove("hidden");

  bgm.pause();
  final.play();

  // ‚úÖ FIXED: final audio ayyaka photo kuda hide
  final.onended=()=>{
    document.getElementById("photoBox").classList.add("hidden");
  };
}

/* ‚ù§Ô∏è Floating hearts generator */
setInterval(()=>{
  let h=document.createElement("div");
  h.className="heart";
  h.innerHTML="üíñ";
  h.style.left=Math.random()*100+"vw";
  h.style.fontSize=(15+Math.random()*15)+"px";
  document.body.appendChild(h);
  setTimeout(()=>h.remove(),8000);
},600);
</script>

</body>
</html>
