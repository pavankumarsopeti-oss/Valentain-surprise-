<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>For You ‚ù§Ô∏è</title>

<style>
/* ===== BASE ===== */
body{
  margin:0;
  padding:0;
  width:100vw;
  height:100vh;
  background:linear-gradient(135deg,#ff9a9e,#fad0c4);
  font-family:'Segoe UI',sans-serif;
  overflow:hidden;
}

/* ===== COMMON CENTER ===== */
.center{
  width:100%;
  height:100%;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center;
}

/* ===== BUTTONS ===== */
.btnBox{
  display:flex;
  gap:25px;
  margin-top:20px;
}

button{
  padding:12px 30px;
  font-size:18px;
  border:none;
  border-radius:25px;
  cursor:pointer;
}

#yes{background:#ff3f7f;color:white;}
#no{
  background:#666;
  color:white;
  position:fixed;
}

.hidden{display:none;}

/* ===== TEXT ===== */
#typing{
  font-size:22px;
  color:#3b001f;
  line-height:1.7;
  padding:25px;
}

/* ===== FULL SCREEN MEDIA ===== */
video, img{
  width:100vw;
  height:100vh;
  object-fit:cover;
}

/* ===== LOADING ===== */
#loading{
  font-size:26px;
  color:#3b001f;
}
</style>
</head>

<body>

<!-- STEP 0 -->
<div id="step0" class="center">
  <h2>Will you stay till the end? üíñ</h2>
  <div class="btnBox">
    <button id="yes">YES</button>
    <button id="no">NO</button>
  </div>
</div>

<!-- TEXT -->
<div id="stepText" class="center hidden">
  <div id="typing"></div>
</div>

<!-- VIDEO -->
<div id="videoBox" class="hidden">
  <video id="vid" src="video.mp4"></video>
</div>

<!-- PHOTOS -->
<div id="photoBox" class="hidden">
  <img id="photo">
</div>

<!-- LOADING -->
<div id="loadingBox" class="center hidden">
  <div id="loading">Loading...</div>
</div>

<audio id="bgm" src="bgm.mp3"></audio>
<audio id="final" src="final.mp3"></audio>

<script>
const yes = document.getElementById("yes");
const no  = document.getElementById("no");
const bgm = document.getElementById("bgm");
const final = document.getElementById("final");

let photos=[
 "photo1.jpg","photo2.jpg","photo3.jpg",
 "photo4.jpg","photo5.jpg","photo6.jpg","photo7.jpg"
];
let p=0;

/* ===== NO BUTTON JUMP ===== */
function jumpNo(){
  const x=Math.random()*(window.innerWidth-100);
  const y=Math.random()*(window.innerHeight-60);
  no.style.left=x+"px";
  no.style.top=y+"px";
}
no.onmouseover=jumpNo;
no.onclick=jumpNo;

/* ===== YES CLICK ===== */
yes.onclick=()=>{
  document.getElementById("step0").classList.add("hidden");

  bgm.currentTime=0;
  bgm.play();   // ‚úÖ WORKS because user click

  showLine("I just want you to see this once üíï",playVideo);
};

/* ===== SINGLE LINE ===== */
function showLine(text,next){
  document.getElementById("stepText").classList.remove("hidden");
  let el=document.getElementById("typing");
  el.innerHTML="";
  let i=0;
  let t=setInterval(()=>{
    el.innerHTML+=text[i++];
    if(i>=text.length){
      clearInterval(t);
      setTimeout(next,2000);
    }
  },100);
}

/* ===== VIDEO ===== */
function playVideo(){
  document.getElementById("stepText").classList.add("hidden");
  let v=document.getElementById("vid");
  document.getElementById("videoBox").classList.remove("hidden");
  v.currentTime=0;
  v.play();

  v.onended=()=>{
    document.getElementById("videoBox").classList.add("hidden");
    longText();
  };
}

/* ===== LONG TEXT ===== */
function longText(){
  let lines=[
    "This was not easy for me...",
    "Every moment reminded me of you...",
    "You became my comfort...",
    "My happiness...",
    "My favorite person üíñ"
  ];
  typeLines(lines,showPhotos);
}

function typeLines(lines,next){
  document.getElementById("stepText").classList.remove("hidden");
  let el=document.getElementById("typing");
  el.innerHTML="";
  let i=0,j=0;
  let t=setInterval(()=>{
    el.innerHTML+=lines[i][j++];
    if(j>=lines[i].length){
      el.innerHTML+="<br><br>";
      i++; j=0;
      if(i>=lines.length){
        clearInterval(t);
        setTimeout(next,2000);
      }
    }
  },90);
}

/* ===== PHOTOS ===== */
function showPhotos(){
  document.getElementById("stepText").classList.add("hidden");
  document.getElementById("photoBox").classList.remove("hidden");
  let img=document.getElementById("photo");
  p=0; img.src=photos[p];

  let t=setInterval(()=>{
    p++;
    if(p>=photos.length){
      clearInterval(t);
      finalScene();
    }else img.src=photos[p];
  },2000);
}

/* ===== FINAL ===== */
function finalScene(){
  bgm.pause();
  document.getElementById("photoBox").classList.add("hidden");
  document.getElementById("loadingBox").classList.remove("hidden");

  setTimeout(()=>{
    document.getElementById("loadingBox").classList.add("hidden");
    let img=document.getElementById("photo");
    img.src="last.jpg";
    document.getElementById("photoBox").classList.remove("hidden");
    final.play();
  },2500);
}
</script>

</body>
</html>
