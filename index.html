<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>For You ðŸ’–</title>

<style>
body{
  margin:0;
  height:100vh;
  background:#000;
  color:white;
  font-family:Arial, sans-serif;
  display:flex;
  justify-content:center;
  align-items:center;
  text-align:center;
  overflow:hidden;
}

.container{width:100%;}

button{
  padding:12px 30px;
  font-size:18px;
  border:none;
  border-radius:25px;
  cursor:pointer;
}

#yes{background:#ff4081;color:white;}
#no{background:#444;color:white;position:absolute;}

.hidden{display:none;}

img,video{
  max-width:80%;
  border-radius:15px;
}

#typing{font-size:22px;line-height:1.6;}
#loading{font-size:26px;}
</style>
</head>

<body>

<div class="container">

  <!-- STEP 0 -->
  <div id="step0">
    <h2>Will you be my Valentine? ðŸ’•</h2>
    <button id="yes" onclick="yesClick()">YES</button>
    <button id="no" onmouseover="jumpNo()">NO</button>
  </div>

  <!-- STEP 1 -->
  <div id="step1" class="hidden">
    <div id="typing"></div>
  </div>

  <!-- VIDEO -->
  <div id="videoBox" class="hidden">
    <video id="vid" src="video.mp4"></video>
  </div>

  <!-- PHOTOS -->
  <div id="photoBox" class="hidden">
    <img id="photo">
  </div>

  <!-- LOADING -->
  <div id="loadingBox" class="hidden">
    <div id="loading">Loading...</div>
  </div>

</div>

<audio id="bgm" src="bgm.mp3" loop></audio>
<audio id="final" src="final.mp3"></audio>

<script>
let step=0;
let photos=[
  "photo1.jpg","photo2.jpg","photo3.jpg",
  "photo4.jpg","photo5.jpg","photo6.jpg","photo7.jpg"
];
let p=0;

function jumpNo(){
  let x=Math.random()*(window.innerWidth-100);
  let y=Math.random()*(window.innerHeight-50);
  no.style.left=x+"px";
  no.style.top=y+"px";
}

function yesClick(){
  document.getElementById("step0").classList.add("hidden");
  bgm.play();
  showLine("I waited for the right moment ðŸ’–",()=>{
    playVideo();
  });
}

function showLine(text,done){
  let el=document.getElementById("typing");
  document.getElementById("step1").classList.remove("hidden");
  el.innerHTML="";
  let i=0;
  let t=setInterval(()=>{
    el.innerHTML+=text[i];
    i++;
    if(i>=text.length){
      clearInterval(t);
      setTimeout(done,2000);
    }
  },50);
}

function playVideo(){
  document.getElementById("step1").classList.add("hidden");
  let v=document.getElementById("vid");
  document.getElementById("videoBox").classList.remove("hidden");
  v.play();
  v.onended=()=>{
    document.getElementById("videoBox").classList.add("hidden");
    longLines();
  };
}

function longLines(){
  let lines=[
    "This was not easy for me...",
    "Every second I thought about you...",
    "You changed my days...",
    "You changed my smiles...",
    "You are special to me ðŸ’•",
    "I feel safe with you...",
    "I feel happy with you...",
    "I feel complete with you...",
    "I don't know the future...",
    "But I want you in it ðŸ’–"
  ];
  typeLines(lines,()=>{
    showPhotos();
  });
}

function typeLines(lines,done){
  document.getElementById("step1").classList.remove("hidden");
  let el=document.getElementById("typing");
  el.innerHTML="";
  let i=0,j=0;
  let int=setInterval(()=>{
    el.innerHTML+=lines[i][j];
    j++;
    if(j>=lines[i].length){
      el.innerHTML+="<br><br>";
      i++;j=0;
      if(i>=lines.length){
        clearInterval(int);
        setTimeout(done,2000);
      }
    }
  },40);
}

function showPhotos(){
  document.getElementById("step1").classList.add("hidden");
  document.getElementById("photoBox").classList.remove("hidden");
  let img=document.getElementById("photo");
  img.src=photos[p];
  p++;
  let interval=setInterval(()=>{
    if(p>=photos.length){
      clearInterval(interval);
      document.getElementById("photoBox").classList.add("hidden");
      finalLine();
    }else{
      img.src=photos[p];
      p++;
    }
  },2000);
}

function finalLine(){
  showLine("One last thing... â¤ï¸",()=>{
    showLoading();
  });
}

function showLoading(){
  document.getElementById("step1").classList.add("hidden");
  document.getElementById("loadingBox").classList.remove("hidden");
  setTimeout(()=>{
    document.getElementById("loadingBox").classList.add("hidden");
    lastScene();
  },3000);
}

function lastScene(){
  let img=document.getElementById("photo");
  img.src="last.jpg";
  document.getElementById("photoBox").classList.remove("hidden");
  bgm.pause();
  final.play();
}
</script>

</body>
</html>
